{% extends 'admin/base.html' %} {% block content %}<br /><br /><hr><br /><br />{% if messages %}<h3>Messages : ({{ messages|length }})</h3><div class="results-table" style="background: white; padding: 20px; border-radius: 8px">    <table border="1" style="width: 100%; border-collapse: collapse">        <thead style="background-color: #1e3a8a; color: white">            <tr>                <th>Id message</th>                <td>Nom</td>                <th>Message</th>                <th>Date</th>                <th>Action</th>            </tr>        </thead>        <tbody>            {% for message in messages %}            {% if message["read"] != 0 %}                        <tr>                <td>{{ message['id'] }}</td>                <td>                    {% if message.prenom and message.nom %}                        {{ message.prenom }} {{ message.nom }}                    {% else %}                        <span class="text-muted"><i>Utilisateur supprimé</i></span>                    {% endif %}                </td>                <td>{{ message['message'] }}</td>                <td>{{ set_date(message['created_at']) }}</td>            {% endif %}            {% endfor %}        </tbody>    </table></div>{% else %}    <h3>Aucun message pour le moment.</h3>{% endif %}<br /><br /><hr><br /><br /><form action="{{ url_for('admin.mailbox') }}" method="POST" accept-charset="utf-8">    <input type="text" name="titre" id="titre" placeholder="Titre (Obligatoire pour l'email)" value="{{ request.form.email }}" />    <textarea name="message" id="message" rows="8" cols="40" placeholder="Message" value="{{ request.form.message }}"></textarea>    <input type="text" name="lien" id="lien" placeholder="Lien (facultatif)" value="{{ request.form.lien }}" />    <input type="text" name="text_button" id="text_button" placeholder="Texte du bouton (facultatif)" value="{{ request.form.text_button }}" />    <br />    <hr />    <br />    <input type="text" name="titre_popup" id="titre_popup" placeholder="Titre pour le pop up (Optionnel)" value="{{ request.form.titre_popup }}" />    <br />    <textarea name="message_popup" id="message_popup" rows="2" cols="20" placeholder="Court message pop up (Obligatoire pour le pop up)" value="{{ request.form.message_popup }}"></textarea>    <br />    <hr />    <br />    <select name="key" id="key">        <option value="">Choisir la klé</option>        <option value="prenom">Prénom</option>        <option value="nom">Nom</option>        <option value="username">Username</option>        <option value="email">Email</option>        <option value="age">Age</option>        <option value="classe">Classe</option>    </select>    <input type="text" name="result" id="result" placeholder="Résultat" value="{{ request.form.result }}" />    <br />    <hr />    <br />    <button type="submit">Envoyer</button></form>{% endblock %} {% block js %}<script>    document.getElementById("key").addEventListener("change", function () {        const input = document.getElementById("result");        if (this.value === "age") {            input.type = "number";            input.min = 0;            input.max = 100;        } else {            input.type = "text";            input.removeAttribute("min");            input.removeAttribute("max");        }    });</script>{% endblock %}