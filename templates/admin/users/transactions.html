<!-- {% extends 'admin/base.html' %} {% block head %}<title>Transactions de {{ user.prenom }}</title>{% endblock %} {% block content %}<div class="page-header">    <div style="display: flex; align-items: center; gap: 15px;">        <a href="{{ url_for('users.users') }}" class="btn-secondary" style="padding: 5px 10px;">            ← Retour        </a>        <h2 style="margin:0;">Historique : {{ user.prenom }} {{ user.nom }}</h2>    </div>    <div style="margin-top: 5px; color: #64748b;">        Solde actuel : <strong style="color: var(--admin-primary);">{{ format_money(user.solde) }} HTG</strong>    </div></div><div class="table-responsive" style="margin-top: 20px;">    {% if transactions %}    <table>        <thead>            <tr>                <th>ID</th>                <th>Type</th>                <th>Montant</th>                <th>Détails</th>                <th>Statut</th>                <th>Date</th>            </tr>        </thead>        <tbody>            {% for t in transactions %}            <tr>                <td>#{{ t.id }}</td>                <td>                    {% if t.type == 'depot' %}                        <span style="color: green; font-weight: bold;">DÉPÔT</span>                    {% else %}                        <span style="color: red; font-weight: bold;">RETRAIT</span>                    {% endif %}                </td>                <td style="font-weight: 600;">                    {{ format_money(t.montant) }} HTG                </td>                <td style="font-size: 0.9em;">                    {% if t.telephone %}MonCash: {{ t.telephone }}<br>{% endif %}                    {% if t.moncash_id %}ID: {{ t.moncash_id }}{% endif %}                    {% if t.raison_refus %}<br><span style="color:red; font-size:0.8em">Raison: {{ t.raison_refus }}</span>{% endif %}                </td>                <td>                    {% if t.statut == 'valide' %}                        <span style="background:#dcfce7; color:#166534; padding:2px 8px; border-radius:10px; font-size:0.8em;">Validé</span>                    {% elif t.statut == 'refuse' %}                        <span style="background:#fee2e2; color:#991b1b; padding:2px 8px; border-radius:10px; font-size:0.8em;">Refusé</span>                    {% else %}                        <span style="background:#ffedd5; color:#9a3412; padding:2px 8px; border-radius:10px; font-size:0.8em;">En attente</span>                    {% endif %}                </td>                <td style="font-size: 0.85em; color: #64748b;">                    {{ t.created_at }}                </td>            </tr>            {% endfor %}        </tbody>    </table>    {% else %}    <div style="text-align: center; padding: 40px; color: #64748b;">        Aucune transaction enregistrée pour cet utilisateur.    </div>    {% endif %}</div><div id="History" class="tab-content">    {% if transactions %}    <table style="width: 100%; border-collapse: collapse">        <thead>            <tr style="border-bottom: 2px solid #ddd; text-align: left; color: #666">                <th style="padding: 10px">Type</th>                <th>Détail</th>                <th style="text-align: right">Montant</th>                <th style="text-align: right; padding-right: 10px">Date</th>            </tr>        </thead>        <tbody>            {% for t in transactions %}            <tr style="border-bottom: 1px solid #eee; height: 50px">                <td style="padding: 10px">                    {% if t.type == 'depot' or t.type == 'recu' or t.type == 'gain' %}                    <span style="color: #0f9d58; font-weight: bold; background: #e8f5e9; padding: 4px 8px; border-radius: 4px; font-size: 0.8em">+ CRÉDIT</span>                    {% else %}                    <span style="color: #d32f2f; font-weight: bold; background: #ffebee; padding: 4px 8px; border-radius: 4px; font-size: 0.8em">- DÉBIT</span>                    {% endif %}                </td>                <td style="font-size: 0.9em; font-weight: 500; color: #333">{{ t.description }}</td>                <td style="text-align: right; font-weight: bold; color: {{ '#0f9d58' if (t.type == 'depot' or t.type == 'recu') else '#d32f2f' }}">{{ format_money(t.display_montant) }} PMC</td>                <td style="text-align: right; font-size: 0.8em; color: #888; padding-right: 10px">{{ t.sort_date[:16] }}</td>            </tr>            {% endfor %}        </tbody>    </table>    {% else %}    <div style="text-align: center; padding: 40px; color: #666">        <p>Aucune transaction récente.</p>    </div>    {% endif %}</div>{% endblock %} --><style>body{display: none;}</style>