{% extends 'admin/base.html' %} {% block head %}<title>Gestion des matchs</title>{% endblock %} {% block content %}<div class="header-actions">    <h3>        {{ titre }}        <span style="font-size: 0.8em; color: #64748b">({{ programmes|length }})</span>    </h3>    <div class="tabs-container">        <a href="{{ url_for('matchs.show_edit_matchs', mode='actifs') }}" class="tab-btn {{ 'active' if mode == 'actifs' else '' }}">‚öΩ Matchs Actifs</a>        <a href="{{ url_for('matchs.show_edit_matchs', mode='archives') }}" class="tab-btn {{ 'active' if mode == 'archives' else '' }}">üìú Archives (Termin√©s)</a>    </div></div><br />{% if not programmes %}<div style="background: white; padding: 40px; text-align: center; border-radius: 8px; color: #64748b">    <p>Aucun match trouv√© dans cette cat√©gorie.</p>    <a href="{{ url_for('matchs.nouveau_match') }}" class="btn-primary btn" style="margin-top: 10px">+ Cr√©er un match</a></div>{% else %}<div class="table-responsive">    <table>        <thead>            <tr>                <th style="width: 50px">ID</th>                <th>Rencontre</th>                <th>Date</th>                <th>Statut</th>                <th>Actions</th>            </tr>        </thead>        <tbody>            {% for id, match in programmes.items() %}            <tr>                <td>#{{ match["match_id"] }}</td>                <td>                    <span style="font-weight: 700">{{ match['equipe_a'] }}</span>                    <span style="font-size: 0.8em; color: #64748b">VS</span>                    <span style="font-weight: 700">{{ match['equipe_b'] }}</span>                </td>                <td>{{ set_date(match['date_match']) }}</td>                <td>                    {% set st = match['statut'] %}                    <span                        style="                            padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold;                            background: {{ '#dcfce7' if st == 'ouvert' else ('#fee2e2' if st == 'ferm√©' else ('#fef9c3' if st == 'termin√©' else '#9ca3af')) }};                            color: {{ '#166534' if st == 'ouvert' else ('#991b1b' if st == 'ferm√©' else ('#854d0e' if st == 'termin√©' else '#fff')) }};                        ">                        {{ st|upper }}                    </span>                </td>                <td class="table-actions">                    {% if mode == 'archives' and match.bilan %}                    <div style="font-size: 0.85rem">                        <div>                            Mises:                            <strong>{{ format_money(match.bilan.mises) }} G</strong>                        </div>                        <div style="color:{{ 'green' if match.bilan.benefice >= 0 else 'red' }}">                            P/L:                            <strong>{{ format_money(match.bilan.benefice) }} G</strong>                        </div>                    </div>                    {% else %}                    <a href="{{ url_for('matchs.edit_matchs', match_id=match['match_id']) }}" class="text-edit">‚úèÔ∏è Modifier</a>                    <br />                    <a href="{{ url_for('matchs.cloturer_match', match_id=match['match_id']) }}" style="color: var(--admin-success)">üèÅ Cl√¥turer</a>                    <br />                    <a href="javascript:void(0)" onclick="confirmDelete({{ match['match_id'] }})" style="color: red" class="text-delete">üóëÔ∏è Supprimer</a>                    {% endif %}                </td>            </tr>            {% endfor %}        </tbody>    </table></div>{% endif %}<div id="deleteModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); align-items: center; justify-content: center">    <div style="background: white; padding: 25px; border-radius: 8px; width: 350px; text-align: center">        <h4>Supprimer ce match ?</h4>        <p style="font-size: 0.9em; color: #666">Action irr√©versible.</p>        <form id="deleteForm" method="POST" autocomplete="off">            <input type="text" name="username" placeholder="Username Admin" required style="margin: 10px 0" autocomplete="off" />            <input type="password" name="password" placeholder="Mot de passe" required style="margin: 10px 0" autocomplete="off"/>            <div style="display: flex; gap: 10px; margin-top: 10px">                <button type="button" onclick="closeDeleteModal()" style="background: #e2e8f0; color: #333; flex: 1">Annuler</button>                <button type="submit" class="btn-danger" style="flex: 1">Supprimer</button>            </div>        </form>    </div></div><script>    const modal = document.getElementById("deleteModal");    const form = document.getElementById("deleteForm");    function confirmDelete(matchId) {        form.action = `/admin/match/supprimer/${matchId}`;        modal.style.display = "flex";    }    function closeDeleteModal() {        modal.style.display = "none";        form.reset();    }</script>{% endblock %}